<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>validators</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>

</head>

<body>
<P><FONT style="BACKGROUND-COLOR: #ffff00" color=#ff0000>给字段添加验证，并在前端验证字段合法性</FONT></P>
<P>1、给字段添加验证</P>
<P>a、</P>
<DIV 
style="FONT-SIZE: 14px; FONT-FAMILY: Consolas, 'Courier New', monospace; WHITE-SPACE: pre; FONT-WEIGHT: normal; COLOR: #d4d4d4; LINE-HEIGHT: 19px; BACKGROUND-COLOR: #1e1e1e">
<DIV><SPAN style="COLOR: #9cdcfe">fields:</SPAN><SPAN style="COLOR: #d4d4d4"> 
[{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">name:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'name'</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">type:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'string'</SPAN><SPAN 
style="COLOR: #d4d4d4">,</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">validators:</SPAN><SPAN style="COLOR: #d4d4d4"> 
{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">type:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'presence'</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">},</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">},</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">name:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'code'</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">type:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'string'</SPAN><SPAN 
style="COLOR: #d4d4d4">,</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">validators:</SPAN><SPAN style="COLOR: #d4d4d4"> 
{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">type:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'presence'</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">},</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">],</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">data:</SPAN><SPAN style="COLOR: #d4d4d4"> [{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">code:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'1'</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">name:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'远程'</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">}, {</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">code:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'2'</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">name:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'远程'</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">}],</SPAN></DIV></DIV>
<P>b、</P>
<DIV 
style="FONT-SIZE: 14px; FONT-FAMILY: Consolas, 'Courier New', monospace; WHITE-SPACE: pre; FONT-WEIGHT: normal; COLOR: #d4d4d4; LINE-HEIGHT: 19px; BACKGROUND-COLOR: #1e1e1e">
<DIV><SPAN style="COLOR: #9cdcfe">model:</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #9cdcfe">Ext</SPAN><SPAN 
style="COLOR: #d4d4d4">.</SPAN><SPAN style="COLOR: #dcdcaa">define</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #ce9178">'User'</SPAN><SPAN 
style="COLOR: #d4d4d4">, {</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">extend:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'Ext.data.Model'</SPAN><SPAN 
style="COLOR: #d4d4d4">,</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">fields:</SPAN><SPAN style="COLOR: #d4d4d4"> 
[</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">{ </SPAN><SPAN 
style="COLOR: #9cdcfe">name:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'name'</SPAN><SPAN style="COLOR: #d4d4d4">, </SPAN><SPAN 
style="COLOR: #9cdcfe">type:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'string'</SPAN><SPAN style="COLOR: #d4d4d4"> 
},</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">{ </SPAN><SPAN 
style="COLOR: #9cdcfe">name:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'code'</SPAN><SPAN style="COLOR: #d4d4d4">, </SPAN><SPAN 
style="COLOR: #9cdcfe">type:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'string'</SPAN><SPAN style="COLOR: #d4d4d4"> 
}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">],</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">validators:</SPAN><SPAN style="COLOR: #d4d4d4"> 
{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">name:</SPAN><SPAN style="COLOR: #d4d4d4"> { </SPAN><SPAN 
style="COLOR: #9cdcfe">type:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'presence'</SPAN><SPAN style="COLOR: #d4d4d4"> 
}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">},</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">}),</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">data:</SPAN><SPAN style="COLOR: #d4d4d4"> [{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">code:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'1'</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">name:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'远程'</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">}, {</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">code:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'2'</SPAN><SPAN style="COLOR: #d4d4d4">,</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">name:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'远程'</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">}],</SPAN></DIV></DIV>
<P><FONT style="BACKGROUND-COLOR: #ffff00" color=#ff0000>验证常用类型</FONT></P><PRE class=" language-javascript" style="OVERFLOW: auto; WORD-WRAP: normal; MAX-WIDTH: 800px; BACKGROUND: rgb(245,242,240); WHITE-SPACE: pre; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; WORD-BREAK: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 1em; TEXT-ALIGN: left; PADDING-TOP: 1em; FONT: 13px/1.5 Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; PADDING-LEFT: 1em; MARGIN: 0.5em 0px; WIDOWS: 1; LETTER-SPACING: normal; PADDING-RIGHT: 1em; MAX-HEIGHT: 600px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; transform: translateZ(0px); box-shadow: rgba(0, 0, 0, 0.117647) 0px 1px 3px, rgba(0, 0, 0, 0.239216) 0px 1px 2px; text-shadow: rgb(255, 255, 255) 0px 1px; tab-size: 4"><CODE class=" language-javascript" style="WORD-WRAP: normal; FONT-FAMILY: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; BACKGROUND: 0px 0px; WHITE-SPACE: pre; WORD-SPACING: normal; WORD-BREAK: normal; COLOR: rgb(0,0,0); TEXT-ALIGN: left; LINE-HEIGHT: 1.5; text-shadow: rgb(255, 255, 255) 0px 1px; tab-size: 4">   validators<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">{</SPAN>
        age<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token string" style="COLOR: rgb(102,153,0)">'presence'</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">,</SPAN>
        name<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">{</SPAN> type<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token string" style="COLOR: rgb(102,153,0)">'length'</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">,</SPAN> min<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token number" style="COLOR: rgb(153,0,85)">2</SPAN> <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">}</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">,</SPAN>
        gender<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">{</SPAN> type<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token string" style="COLOR: rgb(102,153,0)">'inclusion'</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">,</SPAN> list<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">[</SPAN><SPAN class="token string" style="COLOR: rgb(102,153,0)">'Male'</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">,</SPAN> <SPAN class="token string" style="COLOR: rgb(102,153,0)">'Female'</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">]</SPAN> <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">}</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">,</SPAN>
        username<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">[</SPAN>
            <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">{</SPAN> type<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token string" style="COLOR: rgb(102,153,0)">'exclusion'</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">,</SPAN> list<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">[</SPAN><SPAN class="token string" style="COLOR: rgb(102,153,0)">'Admin'</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">,</SPAN> <SPAN class="token string" style="COLOR: rgb(102,153,0)">'Operator'</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">]</SPAN> <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">}</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">,</SPAN>
            <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">{</SPAN> type<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token string" style="COLOR: rgb(102,153,0)">'format'</SPAN><SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">,</SPAN> matcher<SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">:</SPAN> <SPAN class="token regex" style="COLOR: rgb(238,153,0)">/([a-z]+)[0-9]{2,3}/i</SPAN> <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">}</SPAN>
        <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">]</SPAN>
    <SPAN class="token punctuation" style="COLOR: rgb(153,153,153)">}</SPAN></CODE></PRE>
<P>2、前端验证合法性</P>
<DIV 
style="FONT-SIZE: 14px; FONT-FAMILY: Consolas, 'Courier New', monospace; WHITE-SPACE: pre; FONT-WEIGHT: normal; COLOR: #d4d4d4; LINE-HEIGHT: 19px; BACKGROUND-COLOR: #1e1e1e">
<DIV><SPAN style="COLOR: #569cd6">var</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #9cdcfe">me</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #569cd6">this</SPAN><SPAN 
style="COLOR: #d4d4d4">,</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">view</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #569cd6">this</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">getView</SPAN><SPAN 
style="COLOR: #d4d4d4">().</SPAN><SPAN style="COLOR: #dcdcaa">down</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #ce9178">'grid'</SPAN><SPAN 
style="COLOR: #d4d4d4">),</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">gStore</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #9cdcfe">me</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">getViewModel</SPAN><SPAN 
style="COLOR: #d4d4d4">().</SPAN><SPAN style="COLOR: #dcdcaa">get</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN 
style="COLOR: #ce9178">'gridStore'</SPAN><SPAN 
style="COLOR: #d4d4d4">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #4ec9b0">console</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">log</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN 
style="COLOR: #9cdcfe">gStore</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">getData</SPAN><SPAN 
style="COLOR: #d4d4d4">().</SPAN><SPAN style="COLOR: #dcdcaa">getAt</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #b5cea8">0</SPAN><SPAN 
style="COLOR: #d4d4d4">).</SPAN><SPAN style="COLOR: #dcdcaa">isValid</SPAN><SPAN 
style="COLOR: #d4d4d4">());</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #4ec9b0">console</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">log</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN 
style="COLOR: #9cdcfe">gStore</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">getData</SPAN><SPAN 
style="COLOR: #d4d4d4">().</SPAN><SPAN style="COLOR: #dcdcaa">getAt</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #b5cea8">0</SPAN><SPAN 
style="COLOR: #d4d4d4">).</SPAN><SPAN 
style="COLOR: #dcdcaa">validate</SPAN><SPAN 
style="COLOR: #d4d4d4">());</SPAN></DIV></DIV></body>
</html>
