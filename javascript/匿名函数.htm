<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>匿名函数</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>

</head>

<body>
<DIV 
style="FONT-SIZE: 14px; FONT-FAMILY: Consolas, 'Courier New', monospace; WHITE-SPACE: pre; FONT-WEIGHT: normal; COLOR: #d4d4d4; LINE-HEIGHT: 19px; BACKGROUND-COLOR: #1e1e1e">
<DIV><SPAN style="COLOR: #569cd6">var</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #dcdcaa">Book</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #569cd6">function</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #9cdcfe">newIsbn</SPAN><SPAN 
style="COLOR: #d4d4d4">, </SPAN><SPAN 
style="COLOR: #9cdcfe">newTitle</SPAN><SPAN style="COLOR: #d4d4d4">, 
</SPAN><SPAN style="COLOR: #9cdcfe">newAuthor</SPAN><SPAN 
style="COLOR: #d4d4d4">) {</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN style="COLOR: #608b4e">// 私有属性 
</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">var</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #9cdcfe">isbn</SPAN><SPAN style="COLOR: #d4d4d4">, </SPAN><SPAN 
style="COLOR: #9cdcfe">title</SPAN><SPAN style="COLOR: #d4d4d4">, </SPAN><SPAN 
style="COLOR: #9cdcfe">author</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN style="COLOR: #608b4e">// 私有方法 
</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">function</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #dcdcaa">checkIsbn</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #9cdcfe">isbn</SPAN><SPAN 
style="COLOR: #d4d4d4">) {</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN style="COLOR: #608b4e">// TODO 
</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN style="COLOR: #608b4e">// 特权方法 
</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">this</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">getIsbn</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #569cd6">function</SPAN><SPAN style="COLOR: #d4d4d4">() 
{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #c586c0">return</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #9cdcfe">isbn</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">};</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">this</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">setIsbn</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #569cd6">function</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN 
style="COLOR: #9cdcfe">newIsbn</SPAN><SPAN style="COLOR: #d4d4d4">) 
{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #c586c0">if</SPAN><SPAN style="COLOR: #d4d4d4"> (</SPAN><SPAN 
style="COLOR: #d4d4d4">!</SPAN><SPAN 
style="COLOR: #dcdcaa">checkIsbn</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #9cdcfe">newIsbn</SPAN><SPAN 
style="COLOR: #d4d4d4">)) </SPAN><SPAN style="COLOR: #c586c0">throw</SPAN><SPAN 
style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #569cd6">new</SPAN><SPAN 
style="COLOR: #d4d4d4"> </SPAN><SPAN style="COLOR: #4ec9b0">Error</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN style="COLOR: #ce9178">'Book: Invalid 
ISBN.'</SPAN><SPAN style="COLOR: #d4d4d4">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">isbn</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #9cdcfe">newIsbn</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">};</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">this</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">getTitle</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #569cd6">function</SPAN><SPAN style="COLOR: #d4d4d4">() 
{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #c586c0">return</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #9cdcfe">title</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">};</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">this</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">setTitle</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #569cd6">function</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN 
style="COLOR: #9cdcfe">newTitle</SPAN><SPAN style="COLOR: #d4d4d4">) 
{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">title</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #9cdcfe">newTitle</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #d4d4d4">||</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #ce9178">'No title specified.'</SPAN><SPAN 
style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">};</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">this</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">getAuthor</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #569cd6">function</SPAN><SPAN 
style="COLOR: #d4d4d4">() {</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #c586c0">return</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #9cdcfe">author</SPAN><SPAN style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">};</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">this</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">setAuthor</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #569cd6">function</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN 
style="COLOR: #9cdcfe">newAuthor</SPAN><SPAN style="COLOR: #d4d4d4">) 
{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">author</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #9cdcfe">newAuthor</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #d4d4d4">||</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #ce9178">'No author specified.'</SPAN><SPAN 
style="COLOR: #d4d4d4">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">};</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN style="COLOR: #608b4e">// 构造器代码 
</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">this</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">setIsbn</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN 
style="COLOR: #9cdcfe">newIsbn</SPAN><SPAN 
style="COLOR: #d4d4d4">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">this</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">setTitle</SPAN><SPAN style="COLOR: #d4d4d4">(</SPAN><SPAN 
style="COLOR: #9cdcfe">newTitle</SPAN><SPAN 
style="COLOR: #d4d4d4">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #569cd6">this</SPAN><SPAN style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #dcdcaa">setAuthor</SPAN><SPAN 
style="COLOR: #d4d4d4">(</SPAN><SPAN 
style="COLOR: #9cdcfe">newAuthor</SPAN><SPAN 
style="COLOR: #d4d4d4">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">};</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #608b4e">// 共有、非特权方法 </SPAN></DIV>
<DIV><SPAN style="COLOR: #4ec9b0">Book</SPAN><SPAN 
style="COLOR: #d4d4d4">.</SPAN><SPAN 
style="COLOR: #9cdcfe">prototype</SPAN><SPAN style="COLOR: #d4d4d4"> 
</SPAN><SPAN style="COLOR: #d4d4d4">=</SPAN><SPAN style="COLOR: #d4d4d4"> 
{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN 
style="COLOR: #9cdcfe">display:</SPAN><SPAN style="COLOR: #d4d4d4"> </SPAN><SPAN 
style="COLOR: #569cd6">function</SPAN><SPAN style="COLOR: #d4d4d4">() 
{</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4"></SPAN><SPAN style="COLOR: #608b4e">// TODO 
</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">}</SPAN></DIV>
<DIV><SPAN style="COLOR: #d4d4d4">};</SPAN></DIV><BR><BR>
<DIV><SPAN style="COLOR: #608b4e">// 说明： </SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #608b4e">// 1，用 var 声明变量 isbn、title 和 author，而不是 
this，意味着它们只存在 Book 构造器中。checkIsbn 函数也是，因为它们是私有的； </SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #608b4e">// 2，访问私有变量和方法的方法只需声明在 Book 
中即可。这些方法称为特权方法。因为，它们是公共方法，但却能访问私有变量和私有方法，像 
getIsbn、setIsbn、getTitle、setTitle、getAuthor、setAuthor（取值器和构造器）。 
</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #608b4e">// 3，为了能在对象外部访问这些特权方法，这些方法前边加了 this 
关键字。因为这些方法定义在 Book 构造器的作用域里，所以它们能够访问私有变量 isbn、title 和 author。但在这些特权方法里引用 
isbn、title 和 author 变量时，没有使用 this 关键字，而是直接引用。因为它们不是公开的。 </SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #608b4e">// 4，任何不需要直接访问私有变量的方法，像 Book.prototype 中声明的，如 
display。它不需要直接访问私有变量，而是通过 get*、set* 简介访问。 </SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #608b4e">// 5，这种方式创建的对象可以具有真正私有的变量。其他人不能直接访问 Book 
对象的任何内部数据，只能通过赋值器和。这样一切尽在掌握。</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #608b4e">// 但这种方式的缺点是：</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #608b4e">// “门户大开型”对象创建模式中，所有方法都创建在原型 prototype 
对象中，因此不管生成多少对象实例，这些方法在内存中只有一份。 </SPAN></DIV>
<DIV><SPAN style="COLOR: #608b4e">// 
而采用本节的做法，没生成一个新的对象实例，都将为每个私有方法（如，checkIsbn）和特权方法（如，getIsbn、setIsbn、getTitle、setTitle、getAuthor、setAuthor）生成一个新的副本。 
</SPAN></DIV>
<DIV><SPAN style="COLOR: #608b4e">// 
因此，本节方法，只适于用在真正需要私有成员的场合。另外，这种方式也不利于继承。</SPAN></DIV></DIV></body>
</html>
