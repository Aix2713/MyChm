<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>单元测试</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>

</head>

<body>
<H2 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(234,236,239) 1px solid; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); PADDING-BOTTOM: 0.3em; FONT: 600 1.5em/1.25 -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 24px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">Mocha</H2>
<H3 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 600 1.25em/1.25 -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 24px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A 
aria-hidden=true id=user-content-实验目的-16 class=anchor 
style="BOX-SIZING: border-box; TEXT-DECORATION: none; FLOAT: left; COLOR: rgb(3,102,214); MARGIN-LEFT: -20px; LINE-HEIGHT: 1; PADDING-RIGHT: 4px; BACKGROUND-COLOR: transparent" 
href="https://github.com/ruanyf/jstraining/blob/master/demos/README.md#实验目的-16"><SVG 
aria-hidden=true class="octicon octicon-link" width="16" viewBox="0 0 16 16" 
version="1.1" height="16"><PATH 
d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" 
fill-rule="evenodd"></PATH></SVG></A>实验目的</H3>
<OL 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; PADDING-LEFT: 2em; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">
  <LI style="BOX-SIZING: border-box">学会使用 Mocha 进行单元测试。</LI></OL>
<H3 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 600 1.25em/1.25 -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 24px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A 
aria-hidden=true id=user-content-操作步骤-16 class=anchor 
style="BOX-SIZING: border-box; TEXT-DECORATION: none; FLOAT: left; COLOR: rgb(3,102,214); MARGIN-LEFT: -20px; LINE-HEIGHT: 1; PADDING-RIGHT: 4px; BACKGROUND-COLOR: transparent" 
href="https://github.com/ruanyf/jstraining/blob/master/demos/README.md#操作步骤-16"><SVG 
aria-hidden=true class="octicon octicon-link" width="16" viewBox="0 0 16 16" 
version="1.1" height="16"><PATH 
d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" 
fill-rule="evenodd"></PATH></SVG></A>操作步骤</H3>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">（1） 
进入<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">demos/mocha-demo</CODE>目录，安装 
Mocha 和 Chai。</P>
<DIV class="highlight highlight-source-shell" 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="BOX-SIZING: border-box; OVERFLOW: auto; WORD-WRAP: normal; MARGIN-BOTTOM: 0px; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; WORD-BREAK: normal; PADDING-BOTTOM: 16px; PADDING-TOP: 16px; PADDING-LEFT: 16px; MARGIN-TOP: 0px; LINE-HEIGHT: 1.45; PADDING-RIGHT: 16px; BACKGROUND-COLOR: rgb(246,248,250); border-radius: 3px">$ <SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">cd</SPAN> demos/mocha-demo
$ npm install -D mocha
$ npm install -D chai</PRE></DIV>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">（2）打开<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">add.js</CODE>文件，查看源码，我们要测试的就是这个脚本。</P>
<DIV class="highlight highlight-source-js" 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="BOX-SIZING: border-box; OVERFLOW: auto; WORD-WRAP: normal; MARGIN-BOTTOM: 0px; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; WORD-BREAK: normal; PADDING-BOTTOM: 16px; PADDING-TOP: 16px; PADDING-LEFT: 16px; MARGIN-TOP: 0px; LINE-HEIGHT: 1.45; PADDING-RIGHT: 16px; BACKGROUND-COLOR: rgb(246,248,250); border-radius: 3px"><SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">function</SPAN> <SPAN class=pl-en style="BOX-SIZING: border-box; COLOR: rgb(111,66,193)">add</SPAN>(<SPAN class=pl-smi style="BOX-SIZING: border-box; COLOR: rgb(36,41,46)">x</SPAN>, <SPAN class=pl-smi style="BOX-SIZING: border-box; COLOR: rgb(36,41,46)">y</SPAN>) {
  <SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">return</SPAN> x <SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">+</SPAN> y;
}

<SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">module</SPAN>.<SPAN class=pl-smi style="BOX-SIZING: border-box; COLOR: rgb(36,41,46)">exports</SPAN> <SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">=</SPAN> add;</PRE></DIV>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">（3）编写一个测试脚本<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">add.test.js</CODE>。</P>
<DIV class="highlight highlight-source-js" 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="BOX-SIZING: border-box; OVERFLOW: auto; WORD-WRAP: normal; MARGIN-BOTTOM: 0px; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; WORD-BREAK: normal; PADDING-BOTTOM: 16px; PADDING-TOP: 16px; PADDING-LEFT: 16px; MARGIN-TOP: 0px; LINE-HEIGHT: 1.45; PADDING-RIGHT: 16px; BACKGROUND-COLOR: rgb(246,248,250); border-radius: 3px"><SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">var</SPAN> add <SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">=</SPAN> <SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">require</SPAN>(<SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">'</SPAN>./add.js<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">'</SPAN></SPAN>);
<SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">var</SPAN> expect <SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">=</SPAN> <SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">require</SPAN>(<SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">'</SPAN>chai<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">'</SPAN></SPAN>).<SPAN class=pl-smi style="BOX-SIZING: border-box; COLOR: rgb(36,41,46)">expect</SPAN>;

<SPAN class=pl-en style="BOX-SIZING: border-box; COLOR: rgb(111,66,193)">describe</SPAN>(<SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">'</SPAN>加法函数的测试<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">'</SPAN></SPAN>, <SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">function</SPAN>() {
  <SPAN class=pl-en style="BOX-SIZING: border-box; COLOR: rgb(111,66,193)">it</SPAN>(<SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">'</SPAN>1 加 1 应该等于 2<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">'</SPAN></SPAN>, <SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">function</SPAN>() {
    <SPAN class=pl-en style="BOX-SIZING: border-box; COLOR: rgb(111,66,193)">expect</SPAN>(<SPAN class=pl-en style="BOX-SIZING: border-box; COLOR: rgb(111,66,193)">add</SPAN>(<SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">1</SPAN>, <SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">1</SPAN>)).<SPAN class=pl-smi style="BOX-SIZING: border-box; COLOR: rgb(36,41,46)">to</SPAN>.<SPAN class=pl-smi style="BOX-SIZING: border-box; COLOR: rgb(36,41,46)">be</SPAN>.<SPAN class=pl-en style="BOX-SIZING: border-box; COLOR: rgb(111,66,193)">equal</SPAN>(<SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">2</SPAN>);
  });
});</PRE></DIV>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">测试脚本与所要测试的源码脚本同名，但是后缀名为<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">.test.js</CODE>（表示测试）或者<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">.spec.js</CODE>（表示规格）。比如，<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">add.js</CODE>的测试脚本名字就是<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">add.test.js</CODE>。</P>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">测试脚本里面应该包括一个或多个<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">describe</CODE>块，每个<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">describe</CODE>块应该包括一个或多个<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">it</CODE>块。</P>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">describe</CODE>块称为"测试套件"（test 
suite），表示一组相关的测试。它是一个函数，第一个参数是测试套件的名称（"加法函数的测试"），第二个参数是一个实际执行的函数。</P>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">it</CODE>块称为"测试用例"（test 
case），表示一个单独的测试，是测试的最小单位。它也是一个函数，第一个参数是测试用例的名称（"1 加 1 应该等于 
2"），第二个参数是一个实际执行的函数。</P>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">上面的测试脚本里面，有一句断言。</P>
<DIV class="highlight highlight-source-js" 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="BOX-SIZING: border-box; OVERFLOW: auto; WORD-WRAP: normal; MARGIN-BOTTOM: 0px; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; WORD-BREAK: normal; PADDING-BOTTOM: 16px; PADDING-TOP: 16px; PADDING-LEFT: 16px; MARGIN-TOP: 0px; LINE-HEIGHT: 1.45; PADDING-RIGHT: 16px; BACKGROUND-COLOR: rgb(246,248,250); border-radius: 3px"><SPAN class=pl-en style="BOX-SIZING: border-box; COLOR: rgb(111,66,193)">expect</SPAN>(<SPAN class=pl-en style="BOX-SIZING: border-box; COLOR: rgb(111,66,193)">add</SPAN>(<SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">1</SPAN>, <SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">1</SPAN>)).<SPAN class=pl-smi style="BOX-SIZING: border-box; COLOR: rgb(36,41,46)">to</SPAN>.<SPAN class=pl-smi style="BOX-SIZING: border-box; COLOR: rgb(36,41,46)">be</SPAN>.<SPAN class=pl-en style="BOX-SIZING: border-box; COLOR: rgb(111,66,193)">equal</SPAN>(<SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">2</SPAN>);</PRE></DIV>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">所谓"断言"，就是判断源码的实际执行结果与预期结果是否一致，如果不一致就抛出一个错误。上面这句断言的意思是，调用<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">add(1, 
1)</CODE>，结果应该等于<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">2</CODE>。</P>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">所有的测试用例（<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">it</CODE>块）都应该含有一句或多句的断言。它是编写测试用例的关键。断言功能由断言库来实现，Mocha本身不带断言库，所以必须先引入断言库。</P>
<DIV class="highlight highlight-source-js" 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="BOX-SIZING: border-box; OVERFLOW: auto; WORD-WRAP: normal; MARGIN-BOTTOM: 0px; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; WORD-BREAK: normal; PADDING-BOTTOM: 16px; PADDING-TOP: 16px; PADDING-LEFT: 16px; MARGIN-TOP: 0px; LINE-HEIGHT: 1.45; PADDING-RIGHT: 16px; BACKGROUND-COLOR: rgb(246,248,250); border-radius: 3px"><SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">var</SPAN> expect <SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">=</SPAN> <SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">require</SPAN>(<SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">'</SPAN>chai<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">'</SPAN></SPAN>).<SPAN class=pl-smi style="BOX-SIZING: border-box; COLOR: rgb(36,41,46)">expect</SPAN>;</PRE></DIV>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">断言库有很多种，Mocha并不限制使用哪一种。上面代码引入的断言库是<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">chai</CODE>，并且指定使用它的<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">expect</CODE>断言风格。</P>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">（4）打开<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">package.json</CODE>文件，改写<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">scripts</CODE>字段的<CODE 
style="BOX-SIZING: border-box; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; PADDING-BOTTOM: 0.2em; PADDING-TOP: 0.2em; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 3px">test</CODE>脚本。</P>
<DIV class="highlight highlight-source-js" 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="BOX-SIZING: border-box; OVERFLOW: auto; WORD-WRAP: normal; MARGIN-BOTTOM: 0px; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; WORD-BREAK: normal; PADDING-BOTTOM: 16px; PADDING-TOP: 16px; PADDING-LEFT: 16px; MARGIN-TOP: 0px; LINE-HEIGHT: 1.45; PADDING-RIGHT: 16px; BACKGROUND-COLOR: rgb(246,248,250); border-radius: 3px"><SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN>scripts<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN></SPAN><SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">:</SPAN> {
  <SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN>test<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN></SPAN><SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">:</SPAN> <SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN>echo <SPAN class=pl-cce style="BOX-SIZING: border-box">\"</SPAN>Error: no test specified<SPAN class=pl-cce style="BOX-SIZING: border-box">\"</SPAN> &amp;&amp; exit 1<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN></SPAN>
},

<SPAN class=pl-c style="BOX-SIZING: border-box; COLOR: rgb(106,115,125)"><SPAN class=pl-c style="BOX-SIZING: border-box; COLOR: rgb(106,115,125)">//</SPAN> 改成</SPAN>

<SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN>scripts<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN></SPAN><SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">:</SPAN> {
  <SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN>test<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN></SPAN><SPAN class=pl-k style="BOX-SIZING: border-box; COLOR: rgb(215,58,73)">:</SPAN> <SPAN class=pl-s style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)"><SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN>mocha *.test.js<SPAN class=pl-pds style="BOX-SIZING: border-box; COLOR: rgb(3,47,98)">"</SPAN></SPAN>
},</PRE></DIV>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">（5）命令行下，执行下面的命令，运行测试用例。</P>
<DIV class="highlight highlight-source-shell" 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="BOX-SIZING: border-box; OVERFLOW: auto; WORD-WRAP: normal; MARGIN-BOTTOM: 0px; FONT-SIZE: 13px; FONT-FAMILY: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, Courier, monospace; WORD-BREAK: normal; PADDING-BOTTOM: 16px; PADDING-TOP: 16px; PADDING-LEFT: 16px; MARGIN-TOP: 0px; LINE-HEIGHT: 1.45; PADDING-RIGHT: 16px; BACKGROUND-COLOR: rgb(246,248,250); border-radius: 3px">$ npm <SPAN class=pl-c1 style="BOX-SIZING: border-box; COLOR: rgb(0,92,197)">test</SPAN></PRE></DIV>
<P 
style="BOX-SIZING: border-box; MARGIN-BOTTOM: 16px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(36,41,46); FONT: 16px/24px -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; WIDOWS: 1; MARGIN-TOP: 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">正常情况下，命令行会有提示，表示测试用例已经通过了。</P></body>
</html>
