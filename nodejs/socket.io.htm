<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>socket.io</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>

</head>

<body>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">原文：<A 
id=Editor_Edit_hlEntryLink title="view: 搞死socket.io第二天，系统api， UP UP UP UP UP" 
style="COLOR: rgb(153,153,102)" 
href="http://www.cnblogs.com/xiezhengcai/p/3956401.html" 
target=_blank>http://www.cnblogs.com/xiezhengcai/p/3956401.html</A>&nbsp;</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><SPAN 
style="FONT-SIZE: 18pt"><STRONG>1. 服务端</STRONG></SPAN></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">io.on('connection',function(socket));</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">监听客户端连接,回调函数会传递本次连接的socket</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">io.sockets.emit('String',data);</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">给所有客户端广播消息</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">io.sockets.socket(socketid).emit('String', 
data);</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">给指定的客户端发送消息</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">socket.on('String',function(data));</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">监听客户端发送的信息</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">socket.emit('String', 
data);</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">给该socket的客户端发送消息</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">&nbsp;</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG>广播消息</STRONG></P>
<DIV class=cnblogs_code 
style="OVERFLOW: auto; FONT-SIZE: 12px !important; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: 'Courier New' !important; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 5px; FONT-STYLE: normal; PADDING-TOP: 5px; PADDING-LEFT: 5px; MARGIN: 5px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; WIDOWS: 1; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="WORD-WRAP: break-word; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; WHITE-SPACE: pre-wrap; MARGIN-TOP: 0px"><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">//</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">给除了自己以外的客户端广播消息</SPAN>
socket.broadcast.emit("msg",{data:"hello,everyone"<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">}); 
</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">//</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">给所有客户端广播消息</SPAN>
io.sockets.emit("msg",{data:"hello,all"});</PRE></DIV>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">&nbsp;</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG>分组</STRONG></P>
<DIV class=cnblogs_code 
style="OVERFLOW: auto; FONT-SIZE: 12px !important; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: 'Courier New' !important; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 5px; FONT-STYLE: normal; PADDING-TOP: 5px; PADDING-LEFT: 5px; MARGIN: 5px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; WIDOWS: 1; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="WORD-WRAP: break-word; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; WHITE-SPACE: pre-wrap; MARGIN-TOP: 0px">socket.on('group1', <SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">function</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important"> (data) {
        socket.join(</SPAN>'group1'<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">);
});
socket.on(</SPAN>'group2',<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">function</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">(data){
        socket.join(</SPAN>'group2'<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">);
 });</SPAN></PRE></DIV>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">客户端发送</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">socket.emit('group1')，就可以加入group1分组；<BR>socket.emit('group2')，就可以加入group2分组；</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><SPAN 
style="COLOR: rgb(255,0,0); BACKGROUND-COLOR: rgb(255,255,255)">一个客户端可以存在多个分组（订阅模式）</SPAN></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG>踢出分组</STRONG></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">socket.leave(data.room);</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG>对分组中的用户发送信息</STRONG></P>
<DIV class=cnblogs_code 
style="OVERFLOW: auto; FONT-SIZE: 12px !important; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: 'Courier New' !important; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 5px; FONT-STYLE: normal; PADDING-TOP: 5px; PADDING-LEFT: 5px; MARGIN: 5px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; WIDOWS: 1; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="WORD-WRAP: break-word; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; WHITE-SPACE: pre-wrap; MARGIN-TOP: 0px"><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">//</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">不包括自己</SPAN>
socket.broadcast.to('group1').emit('event_name'<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">, data);
</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">//</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">包括自己</SPAN>
io.sockets.<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">in</SPAN>('group1').emit('event_name', data);</PRE></DIV>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">broadcast方法允许当前socket 
client不在该分组内</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG>获取连接的客户端socket&nbsp;</STRONG></P>
<DIV class=cnblogs_code 
style="OVERFLOW: auto; FONT-SIZE: 12px !important; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: 'Courier New' !important; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 5px; FONT-STYLE: normal; PADDING-TOP: 5px; PADDING-LEFT: 5px; MARGIN: 5px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; WIDOWS: 1; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="WORD-WRAP: break-word; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; WHITE-SPACE: pre-wrap; MARGIN-TOP: 0px">io.sockets.clients().forEach(<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">function</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important"> (socket) {
    //.....
})</SPAN></PRE></DIV>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">&nbsp;</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG>获取分组信息</STRONG></P>
<DIV class=cnblogs_code 
style="OVERFLOW: auto; FONT-SIZE: 12px !important; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: 'Courier New' !important; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 5px; FONT-STYLE: normal; PADDING-TOP: 5px; PADDING-LEFT: 5px; MARGIN: 5px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; WIDOWS: 1; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="WORD-WRAP: break-word; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; WHITE-SPACE: pre-wrap; MARGIN-TOP: 0px"><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">//</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">获取所有房间（分组）信息</SPAN>
<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">io.sockets.manager.rooms
</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">//</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">来获取此socketid进入的房间信息</SPAN>
<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">io.sockets.manager.roomClients[socket.id]
</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">//</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); LINE-HEIGHT: 1.5 !important">获取particular room中的客户端，返回所有在此房间的socket实例</SPAN>
io.sockets.clients('particular room')</PRE></DIV>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">&nbsp;</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG>另一种分组方式</STRONG></P>
<DIV class=cnblogs_code 
style="OVERFLOW: auto; FONT-SIZE: 12px !important; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: 'Courier New' !important; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 5px; FONT-STYLE: normal; PADDING-TOP: 5px; PADDING-LEFT: 5px; MARGIN: 5px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; WIDOWS: 1; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="WORD-WRAP: break-word; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; WHITE-SPACE: pre-wrap; MARGIN-TOP: 0px">io.of('/some').on('connection', <SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">function</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important"> (socket) {
    socket.on(</SPAN>'test', <SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">function</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important"> (data) {
        socket.broadcast.emit(</SPAN>'event_name'<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">,{});
    });
});</SPAN></PRE></DIV>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">客户端</P>
<DIV class=cnblogs_code 
style="OVERFLOW: auto; FONT-SIZE: 12px !important; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: 'Courier New' !important; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 5px; FONT-STYLE: normal; PADDING-TOP: 5px; PADDING-LEFT: 5px; MARGIN: 5px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; WIDOWS: 1; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="WORD-WRAP: break-word; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; WHITE-SPACE: pre-wrap; MARGIN-TOP: 0px"><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">var</SPAN> socket = io.connect('ws://103.31.201.154:5555/some'<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">)
socket.on(</SPAN>'even_name',<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">function</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">(data){
   console.log(data);
})</SPAN></PRE></DIV>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">客户端都链接到ws://103.31.201.154:5555&nbsp;但是服务端可以通过io.of('/some')将其过滤出来。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">&nbsp;</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">另外，Socket.IO提供了4个配置的API：io.configure, 
io.set, io.enable, 
io.disable。其中io.set对单项进行设置，io.enable和io.disable用于单项设置布尔型的配置。io.configure可以让你对不同的生产环境（如devlopment，test等等）配置不同的参数。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><SPAN 
style="FONT-SIZE: 18pt"><STRONG>2. 客户端</STRONG></SPAN></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG>建立一个socket连接</STRONG></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">var 
socket = io("ws://103.31.201.154:5555");</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG>监听服务消息</STRONG></P>
<DIV class=cnblogs_code 
style="OVERFLOW: auto; FONT-SIZE: 12px !important; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: 'Courier New' !important; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 5px; FONT-STYLE: normal; PADDING-TOP: 5px; PADDING-LEFT: 5px; MARGIN: 5px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; WIDOWS: 1; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><PRE style="WORD-WRAP: break-word; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; WHITE-SPACE: pre-wrap; MARGIN-TOP: 0px">socket.on('msg',<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">function</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">(data){
    socket.emit(</SPAN>'msg', {rp:"fine,thank you"<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">}); //向服务器发送消息
    console.log(data);
});</SPAN></PRE></DIV>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">socket.on("String",function(data)) 
监听服务端发送的消息 Sting参数与服务端emit第一个参数相同</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">&nbsp;</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><STRONG>监听socket断开与重连。</STRONG></P>
<DIV class=cnblogs_code 
style="OVERFLOW: auto; FONT-SIZE: 12px !important; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: 'Courier New' !important; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 5px; FONT-STYLE: normal; PADDING-TOP: 5px; PADDING-LEFT: 5px; MARGIN: 5px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; WIDOWS: 1; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">
<DIV class=cnblogs_code_toolbar 
style="MARGIN-TOP: 5px; BACKGROUND-COLOR: rgb(245,245,245)"><SPAN 
class=cnblogs_code_copy 
style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px"><A 
onclick=copyCnblogsCode(this) title=复制代码 
style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: rgb(153,153,102); BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245)" 
href="javascript:void(0);"><IMG 
style="MAX-WIDTH: 900px; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245)" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="WORD-WRAP: break-word; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; WHITE-SPACE: pre-wrap; MARGIN-TOP: 0px">socket.on('disconnect', <SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">function</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">() {
    console.log(</SPAN>"与服务其断开"<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">);
});


socket.on(</SPAN>'reconnect', <SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); LINE-HEIGHT: 1.5 !important">function</SPAN><SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">() {
    console.log(</SPAN>"重新连接到服务器"<SPAN style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); LINE-HEIGHT: 1.5 !important">);
});</SPAN></PRE>
<DIV class=cnblogs_code_toolbar 
style="MARGIN-TOP: 5px; BACKGROUND-COLOR: rgb(245,245,245)"><SPAN 
class=cnblogs_code_copy 
style="FONT-SIZE: 12px !important; FONT-FAMILY: 'Courier New' !important; LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px"><A 
onclick=copyCnblogsCode(this) title=复制代码 
style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: rgb(153,153,102); BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245)" 
href="javascript:void(0);"><IMG 
style="MAX-WIDTH: 900px; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245)" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">&nbsp;</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">客户端socket.on()监听的事件：</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 13px/19px verdana, arial, sans-serif; MARGIN: 10px auto; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">connect：连接成功<BR>connecting：正在连接<BR>disconnect：断开连接<BR>connect_failed：连接失败<BR>error：错误发生，并且无法被其他事件类型所处理<BR>message：同服务器端message事件<BR>anything：同服务器端anything事件<BR>reconnect_failed：重连失败<BR>reconnect：成功重连<BR>reconnecting：正在重连<BR>当第一次连接时，事件触发顺序为：connecting-&gt;connect；当失去连接时，事件触发顺序为：disconnect-&gt;reconnecting（可能进行多次）-&gt;connecting-&gt;reconnect-&gt;connect。</P></body>
</html>
